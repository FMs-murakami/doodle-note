<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新機能デモ - 折り畳み可能サイドバー & コードブロック強化</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        .demo-container {
            display: flex;
            min-height: 100vh;
        }
        .demo-sidebar {
            width: 280px;
            background: var(--sidebar-bg);
            border-right: 1px solid var(--sidebar-border);
            padding: 1rem;
        }
        .demo-content {
            flex: 1;
            padding: 2rem;
            background: var(--content-bg);
        }
        .feature-section {
            margin-bottom: 3rem;
            padding: 2rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            background: var(--content-bg);
        }
        .feature-title {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.5rem;
            font-weight: 600;
        }
        .demo-note {
            background: #e3f2fd;
            padding: 1rem;
            border-radius: var(--radius-md);
            border-left: 4px solid var(--primary-color);
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <!-- Demo Sidebar -->
        <aside class="demo-sidebar">
            <h2>ドキュメント一覧</h2>
            <nav class="sidebar-nav" role="navigation" aria-label="ドキュメントナビゲーション">
                <div class="nav-category expanded" data-category="概要">
                    <button class="nav-category-toggle" aria-expanded="true" aria-controls="category-概要">
                        <span class="nav-category-title">概要</span>
                        <span class="nav-category-icon" aria-hidden="true">▼</span>
                    </button>
                    <ul class="nav-category-list" role="list" id="category-概要">
                        <li role="listitem">
                            <a href="#" class="active" aria-current="page">ドキュメント一覧</a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-category expanded" data-category="環境構築">
                    <button class="nav-category-toggle" aria-expanded="true" aria-controls="category-環境構築">
                        <span class="nav-category-title">環境構築</span>
                        <span class="nav-category-icon" aria-hidden="true">▼</span>
                    </button>
                    <ul class="nav-category-list" role="list" id="category-環境構築">
                        <li role="listitem">
                            <a href="#">開発環境セットアップ</a>
                        </li>
                        <li role="listitem">
                            <a href="#">デプロイメント手順</a>
                        </li>
                        <li role="listitem">
                            <a href="#">Windows環境構築</a>
                        </li>
                        <li role="listitem">
                            <a href="#">macOS環境構築</a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-category" data-category="api">
                    <button class="nav-category-toggle" aria-expanded="false" aria-controls="category-api">
                        <span class="nav-category-title">API</span>
                        <span class="nav-category-icon" aria-hidden="true">▼</span>
                    </button>
                    <ul class="nav-category-list" role="list" id="category-api">
                        <li role="listitem">
                            <a href="#">API認証仕様</a>
                        </li>
                        <li role="listitem">
                            <a href="#">APIエンドポイント仕様</a>
                        </li>
                        <li role="listitem">
                            <a href="#">API仕様書</a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-category" data-category="ガイド">
                    <button class="nav-category-toggle" aria-expanded="false" aria-controls="category-ガイド">
                        <span class="nav-category-title">ガイド</span>
                        <span class="nav-category-icon" aria-hidden="true">▼</span>
                    </button>
                    <ul class="nav-category-list" role="list" id="category-ガイド">
                        <li role="listitem">
                            <a href="#">トラブルシューティングガイド</a>
                        </li>
                        <li role="listitem">
                            <a href="#">ベストプラクティス</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>
        
        <!-- Demo Content -->
        <main class="demo-content">
            <h1>新機能デモンストレーション</h1>
            <p>実装された新機能をご確認ください。</p>
            
            <!-- Feature 1: Collapsible Sidebar -->
            <section class="feature-section">
                <h2 class="feature-title">📁 折り畳み可能サイドバー</h2>
                <div class="demo-note">
                    <strong>機能:</strong> サイドバーのカテゴリをクリックして展開・折り畳みができます。
                </div>
                <ul>
                    <li>✅ カテゴリヘッダーをクリックして展開・折り畳み</li>
                    <li>✅ 現在のページのカテゴリは自動的に展開</li>
                    <li>✅ 状態はセッション中に保持</li>
                    <li>✅ アクセシビリティ対応（ARIA属性、キーボードナビゲーション）</li>
                    <li>✅ スムーズなアニメーション</li>
                </ul>
                <p><strong>操作方法:</strong> 左側のサイドバーで「API」や「ガイド」のカテゴリヘッダーをクリックしてみてください。</p>
            </section>
            
            <!-- Feature 2: Enhanced Code Blocks -->
            <section class="feature-section">
                <h2 class="feature-title">🎨 強化されたコードブロック</h2>
                <div class="demo-note">
                    <strong>機能:</strong> コードブロックに灰色の背景とコピーボタンが追加されました。
                </div>
                
                <h3>サンプルコード 1: Bash コマンド</h3>
                <pre><code class="language-bash">npm install
npm run dev
git add .
git commit -m "新機能を追加"
git push origin main</code></pre>
                
                <h3>サンプルコード 2: JavaScript</h3>
                <pre><code class="language-javascript">function toggleSidebar() {
  const sidebar = document.getElementById('sidebar');
  const isOpen = sidebar.classList.contains('open');
  
  if (isOpen) {
    sidebar.classList.remove('open');
  } else {
    sidebar.classList.add('open');
  }
}</code></pre>
                
                <h3>サンプルコード 3: CSS</h3>
                <pre><code class="language-css">.nav-category-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 0.75rem 0.5rem;
  background: none;
  border: none;
  cursor: pointer;
}</code></pre>
                
                <ul>
                    <li>✅ 灰色の背景（#f8f9fa）</li>
                    <li>✅ 右上にコピーアイコン付きボタン</li>
                    <li>✅ ワンクリックでコードをクリップボードにコピー</li>
                    <li>✅ コピー完了時の視覚的フィードバック</li>
                    <li>✅ アクセシビリティ対応</li>
                </ul>
            </section>
            
            <!-- Implementation Details -->
            <section class="feature-section">
                <h2 class="feature-title">🔧 実装詳細</h2>
                <h3>変更されたファイル:</h3>
                <ul>
                    <li><code>scripts/sidebar.js</code> - サーバーサイドサイドバー生成の更新</li>
                    <li><code>assets/js/sidebar.js</code> - クライアントサイド機能の追加</li>
                    <li><code>assets/css/style.css</code> - スタイリングの強化</li>
                    <li><code>templates/page.html</code> - コピーボタン機能の改善</li>
                    <li><code>config/config.json</code> - テスト用ページの追加</li>
                </ul>
                
                <h3>新機能:</h3>
                <ul>
                    <li>📁 カテゴリの展開・折り畳み機能</li>
                    <li>💾 セッションストレージによる状態保持</li>
                    <li>🎨 強化されたコードブロックスタイリング</li>
                    <li>📋 改良されたコピー機能</li>
                    <li>♿ アクセシビリティの向上</li>
                    <li>📱 レスポンシブデザインの維持</li>
                </ul>
            </section>
        </main>
    </div>
    
    <script src="assets/js/sidebar.js"></script>
    <script>
        // Add copy button to code blocks
        document.querySelectorAll('pre code').forEach((block) => {
            const button = document.createElement('button');
            button.className = 'copy-button';
            button.textContent = 'コピー';
            button.setAttribute('aria-label', 'コードをコピー');
            button.addEventListener('click', () => {
                navigator.clipboard.writeText(block.textContent).then(() => {
                    button.textContent = 'コピー済み';
                    setTimeout(() => {
                        button.textContent = 'コピー';
                    }, 2000);
                });
            });
            block.parentNode.insertBefore(button, block);
        });
    </script>
</body>
</html>